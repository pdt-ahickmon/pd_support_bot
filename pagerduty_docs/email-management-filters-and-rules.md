

Getting Started
---------------

* [Introduction](/main/docs/introduction)
* [Trial Account Onboarding](/main/docs/trial-account-onboarding)
* [Log In to PagerDuty](/main/docs/log-in-to-pagerduty)
* [Navigate the Incidents Page](/main/docs/navigate-the-incidents-page)
* [Best Practice Ops Guides](https://www.pagerduty.com/ops-guides/)

Incidents
---------

* [Incidents](/main/docs/incidents)
  + [Edit Incidents](/main/docs/edit-incidents)
  + [Reassign Incidents](/main/docs/reassign-incidents)
  + [Incident Priority](/main/docs/incident-priority)
  + [Incident Roles](/main/docs/incident-roles)
  + [Incident Tasks](/main/docs/incident-tasks)
  + [Incident Types](/main/docs/incident-types)
  + [Custom Fields on Incidents](/main/docs/custom-fields-on-incidents)
  + [Why Incidents Fail to Trigger](/main/docs/why-incidents-fail-to-trigger)
  + [Conference Bridge](/main/docs/conference-bridge)
  + [Add Responders](/main/docs/add-responders)
  + [Event Management](/main/docs/event-management)
  + [Dynamic Notifications](/main/docs/dynamic-notifications)
  + [Communicate with Stakeholders](/main/docs/communicate-with-stakeholders)
  + [Status Update Templates](/main/docs/status-update-templates)
* [Alerts](/main/docs/alerts)
  + [Alerts Table](/main/docs/alerts-table)
* [Postmortems and Jeli Post Incident Reviews](/main/docs/postmortems)
* [Visibility Console](/main/docs/visibility-console)

Notifications
-------------

* [Notification Content and Behavior](/main/docs/notification-content-and-behavior)
  + [Push Notifications](/main/docs/push-notifications)
  + [Email Notifications](/main/docs/email-notifications)
  + [Phone Notifications](/main/docs/phone-notifications)
    - [Phone Notification Disclosures](/main/docs/phone-notification-disclosures)
  + [SMS Notifications](/main/docs/sms-notifications)
    - [SMS Notification Disclosures](/main/docs/sms-notification-disclosures)
* [Notification Troubleshooting](/main/docs/notification-troubleshooting)
  + [Expected Notification Behavior](/main/docs/expected-notification-behavior)
  + [Push Notification Troubleshooting](/main/docs/push-notification-troubleshooting)
  + [Email Notification Troubleshooting](/main/docs/email-notification-troubleshooting)
  + [Phone Notification Troubleshooting](/main/docs/phone-notification-troubleshooting)
  + [SMS Notification Troubleshooting](/main/docs/sms-notification-troubleshooting)
* [Supported Countries](/main/docs/supported-countries)
* [Notification Phone Numbers](/main/docs/notification-phone-numbers)

Services
--------

* [Services and Integrations](/main/docs/services-and-integrations)
  + [Service Directory](/main/docs/service-directory)
  + [Service Profile](/main/docs/service-profile)
  + [Business Services](/main/docs/business-services)
    - [Business Service Subscription](/main/docs/business-service-subscription)
  + [Service Graph](/main/docs/service-graph)
  + [Maintenance Windows](/main/docs/maintenance-windows)
  + [Email Management: Filters and Rules](/main/docs/email-management-filters-and-rules)
  + [Regular Expressions](/main/docs/regular-expressions)
* [Configurable Service Settings](/main/docs/configurable-service-settings)
* [Integrate PagerDuty With ITSM Tools](/main/docs/integrating-with-itsm-tools)

People
------

* [Manage Users](/main/docs/manage-users)
  + [Import Users from a CSV](/main/docs/import-users-from-a-csv)
  + [Offboarding](/main/docs/offboarding)
* [User Roles](/main/docs/user-roles)
* [Advanced Permissions](/main/docs/advanced-permissions)
* [User Profile](/main/docs/user-profile)
* [Teams](/main/docs/teams)
* [Contextual Search - Tagging](/main/docs/contextual-search)
* [Schedule Basics](/main/docs/schedule-basics)
  + [Edit Schedules](/main/docs/edit-schedules)
* [Schedule Examples](/main/docs/schedule-examples)
* [Schedules in Third-Party Apps](/main/docs/schedules-in-apps)
* [My On-Call Shifts](/main/docs/my-on-call-shifts)
* [Escalation Policy Basics](/main/docs/escalation-policies)
  + [Round Robin Scheduling](/main/docs/round-robin-scheduling)
* [Escalation Policies and Schedules](/main/docs/escalation-policies-and-schedules)

Integrations
------------

* [Amazon CloudWatch Integration Guide | PagerDuty](/main/docs/amazon-cloudwatch-integration-guide)
* [Amazon EventBridge Integration Guide | PagerDuty](/main/docs/amazon-eventbridge-integration-guide)
* [Amazon GuardDuty Integration Guide | PagerDuty](/main/docs/aws-guardduty-integration-guide)
* [AWS CloudTrail Integration Guide | PagerDuty](/main/docs/aws-cloudtrail-integration-guide)
* [AWS Health Dashboard Integration Guide | PagerDuty](/main/docs/aws-health-dashboard)
* [AWS Security Hub Integration Guide | PagerDuty](/main/docs/aws-security-hub-integration-guide-pagerduty)
* [Bitbucket Integration Guide | PagerDuty](/main/docs/bitbucket)
* [Datadog Apps Integration Guide | PagerDuty](/main/docs/datadog-apps-integration-guide)
* [Email Integration Guide | PagerDuty](/main/docs/email-integration-guide)
* [GitHub Changes Integration Guide | PagerDuty](/main/docs/github-changes)
* [GitLab Changes Integration Guide | PagerDuty](/main/docs/gitlab-changes)
* [Jenkins Changes Integration Guide | PagerDuty](/main/docs/jenkins-changes)
* [Jira Cloud Integration Guide | PagerDuty](/main/docs/jira-cloud)
  + [Jira Cloud User Guide](/main/docs/jira-cloud-user-guide)
  + [Jira Cloud Integration FAQ](/main/docs/jira-cloud-integration-faq)
  + [Jira Cloud Troubleshooting Guide](/main/docs/jira-cloud-troubleshooting-guide)
* [Jira Server Integration Guide | PagerDuty](/main/docs/jira-server)
  + [Jira Server Troubleshooting Guide](/main/docs/jira-server-troubleshooting-guide)
* [Microsoft Teams Integration Guide | PagerDuty](/main/docs/microsoft-teams)
  + [Microsoft Teams User Guide](/main/docs/microsoft-teams-user-guide)
  + [Microsoft Teams Permission Changelog](/main/docs/microsoft-teams-permission-changelog)
* [Salesforce Service Cloud Integration Guide | PagerDuty](/main/docs/salesforce-service-cloud-integration-guide)
  + [Salesforce Service Cloud User Guide](/main/docs/salesforce-service-cloud-user-guide)
  + [Salesforce Custom Field Mappings](/main/docs/salesforce-custom-field-mappings)
* [ServiceNow Integration Guide | PagerDuty](/main/docs/servicenow-integration-guide)
  + [ServiceNow Integration Details](/main/docs/servicenow-integration-details)
  + [ServiceNow User Guide](/main/docs/servicenow-user-guide)
  + [ServiceNow Provisioning](/main/docs/servicenow-provisioning)
  + [Advanced ServiceNow Configuration](/main/docs/advanced-servicenow-configuration)
  + [ServiceNow Change Requests Integration Guide](/main/docs/servicenow-change-requests-integration-guide)
  + [ServiceNow Troubleshooting Guide](/main/docs/servicenow-troubleshooting-guide)
* [ServiceNow CSM Integration Guide](/main/docs/servicenow-csm-integration-guide)
  + [ServiceNow CSM User Guide](/main/docs/servicenow-csm-user-guide)
* [Slack Integration Guide | PagerDuty](/main/docs/slack-integration-guide)
  + [Slack User Guide](/main/docs/slack-user-guide)
  + [Slack Permission Changelog](/main/docs/slack-permission-changelog)
* [Zendesk Integration Guide | PagerDuty](/main/docs/zendesk-integration-guide)
  + [Zendesk User Guide](/main/docs/zendesk-user-guide)
  + [Zendesk Custom Field Mappings](/main/docs/zendesk-custom-field-mappings)
* [Zoom Integration Guide | PagerDuty](/main/docs/zoom-integration-guide)
* [Nagios Troubleshooting Guide](/main/docs/nagios-troubleshooting-guide)
* [PagerDuty Agent Integration Guide](/main/docs/pagerduty-agent-integration-guide)
* [PagerDuty Agent Troubleshooting Guide](/main/docs/pagerduty-agent-troubleshooting-guide)
* [SolarWinds Orion Troubleshooting Guide](/main/docs/solarwinds-orion-troubleshooting-guide)
* [Zabbix Troubleshooting Guide](/main/docs/zabbix-troubleshooting-guide)
* [Extensions](/main/docs/extensions)
* [Add-ons](/main/docs/add-ons)
* [Webhooks](/main/docs/webhooks)
* [Custom Incident Actions](/main/docs/custom-incident-actions)
* [Single Sign-On (SSO)](/main/docs/sso)
* [Live Call Routing](/main/docs/live-call-routing)
* [Apps](/main/docs/apps)

Automation
----------

* [PagerDuty Automation Actions](/main/docs/automation-actions)
  + [PagerDuty Automation Trial](/main/docs/pagerduty-automation-trial)
* [Incident Workflows](/main/docs/incident-workflows)
  + [Workflow Integrations](/main/docs/workflow-integrations)
  + [Workflow Actions](https://support.pagerduty.com/actions/docs/incident-workflow-actions-overview)
* [PagerDuty Workflow Automation](https://help.catalytic.com/)
* [PagerDuty Runbook Automation](https://docs.rundeck.com/docs/)

Generative AI
-------------

* [PagerDuty Advance](/main/docs/pagerduty-advance)

AIOps
-----

* [PagerDuty AIOps](/main/docs/aiops)
  + [PagerDuty AIOps Quickstart Guide](/main/docs/pagerduty-aiops-quickstart-guide)
  + [Intelligent Alert Grouping](/main/docs/intelligent-alert-grouping)
    - [Preview Intelligent Alert Grouping](/main/docs/preview-intelligent-alert-grouping)
  + [Content-Based Alert Grouping](/main/docs/content-based-alert-grouping)
  + [Unified Alert Grouping](/main/docs/unified-alert-grouping)
  + [Global Alert Grouping](/main/docs/global-alert-grouping)
  + [Time-Based Alert Grouping](/main/docs/time-based-alert-grouping)
  + [Auto-Pause Incident Notifications](/main/docs/auto-pause-incident-notifications)
  + [Alert Suppression](https://support.pagerduty.com/docs/event-orchestration#incident-data)
  + [Past Incidents](/main/docs/past-incidents)
  + [Related Incidents](/main/docs/related-incidents)
  + [Outlier Incident](/main/docs/outlier-incident)
  + [Probable Origin](/main/docs/probable-origin)
  + [Recent Changes](/main/docs/recent-changes)
  + [Event Orchestration](/main/docs/event-orchestration)
    - [Event Orchestration Cache Variables](/main/docs/event-orchestration-cache-variables)
    - [Event Orchestration Examples](/main/docs/event-orchestration-examples)
  + [Operations Console](/main/docs/operations-console)
* [Legacy Event Intelligence](/main/docs/legacy-event-intelligence)
* [Rulesets](/main/docs/rulesets)
* [Migrate to Event Orchestration](/main/docs/migrate-to-event-orchestration)

Analytics
---------

* [Analytics Dashboard](/main/docs/analytics-dashboard)
* [Insights](/main/docs/insights)
* [Operational Reviews](/main/docs/operational-reviews)
* [On-Call Readiness Reports](/main/docs/on-call-readiness-reports)
* [Event Analytics](/main/docs/event-analytics)
* [PagerDuty Advance Analytics](/main/docs/pagerduty-advance-analytics)
* [User Onboarding Report](/main/docs/user-onboarding-report)
* [Recommendations](/main/docs/recommendations)
* [Audit Trail Reporting](/main/docs/audit-trail-reporting)
* [PagerDuty Analytics Slack Integration](/main/docs/pagerduty-analytics-slack-integration)
* [Operational Maturity](/main/docs/operational-maturity)

APIs
----

* [APIs Overview](https://developer.pagerduty.com/docs/ZG9jOjQ2NDA2-introduction)
* [API Access Keys](/main/docs/api-access-keys)
  + [REST API Rate Limits](/main/docs/rest-api-rate-limits)
* [Developer Documentation](https://v2.developer.pagerduty.com/docs)
* [API Client Libraries](https://developer.pagerduty.com/docs/tools-libraries/client-libraries/?utm_source=web&utm_campaign=kb_nav&utm_medium=link)
* [Safelist IPs](/main/docs/safelist-ips)
* [Third-Party Tools](/main/docs/third-party-tools)
  + [API Tools & Code Samples](https://developer.pagerduty.com/docs/tools-libraries/tools-projects/?utm_source=web&utm_campaign=kb_nav&utm_medium=link)

Status
------

* [Status Pages Overview](/main/docs/status-pages-overview)
* [Internal Status Page](/main/docs/internal-status-page)
* [External Status Page](/main/docs/external-status-page)
  + [Private Status Page](/main/docs/private-status-page)

Billing and Account Settings
----------------------------

* [Billing, Invoices and Payments](/main/docs/billing-invoices-payments)
  + [Form W-9](/main/docs/w-9)
  + [Vendor Form](/main/docs/vendor-form)
  + [Cancel Your Account](/main/docs/cancel-your-account)
* [Account Settings](/main/docs/account-settings)
* [Account Subdomains](/main/docs/account-subdomains)
* [Time Zone Settings](/main/docs/time-zone-settings)

Mobile App
----------

* [Training Material](https://university.pagerduty.com/page/on-demand#new-to-pagerduty_getting-started)
* [PagerDuty Mobile App](/main/docs/mobile-app)
  + [Mobile Home Screen](/main/docs/mobile-home-screen)
  + [Mobile Widgets](/main/docs/mobile-widgets)
* [Mobile App Settings](/main/docs/mobile-app-settings)
* [Use Mobile Schedules](/main/docs/use-mobile-schedules)
* [Mobile Status Dashboard](/main/docs/mobile-status-dashboard)
  + [Home Screen Status Dashboard](/main/docs/home-screen-status-dashboard)
* [MDM Setup and Supported Web Browsers](/main/docs/mdm-setup-browsers)
* [Mobile Release Notes](/main/docs/release-notes)

Platform
--------

* [What's New in PagerDuty](https://www.pagerduty.com/whats-new)
* [Platform Release Notes](/main/docs/platform-release-notes)
  + [Platform Release Notes (2023)](/main/docs/platform-release-notes-2023)
  + [Platform Release Notes (2022)](/main/docs/platform-release-notes-2022)
  + [Platform Release Notes (2021)](/main/docs/platform-release-notes-2021)
  + [Platform Release Notes (2020)](/main/docs/platform-release-notes-2020)
  + [Platform Release Notes (2019)](/main/docs/platform-release-notes-2019)
  + [Platform Release Notes (2018)](/main/docs/platform-release-notes-2018)
  + [Platform Release Notes (2017)](/main/docs/platform-release-notes-2017)
* [System Requirements](/main/docs/system-requirements)
* [Common Event Format (PD-CEF)](/main/docs/pd-cef)
* [Search](/main/docs/search)
* [PagerDuty Outage Notifications](/main/docs/pagerduty-outage-notifications)
* [Service Regions](/main/docs/service-regions)

Jeli part of PagerDuty
----------------------

* [Get Started With Jeli](/main/docs/get-started-with-jeli)
* [Jeli Incidents](/main/docs/jeli-incidents)
  + [Jeli Slackbot Commands](/main/docs/jeli-slackbot-commands)
  + [Mitigate a Jeli Incident](/main/docs/mitigate-an-incident)
* [Jeli Workflows](/main/docs/jeli-workflows)
* [Jeli Opportunities](/main/docs/opportunities)
  + [Basic Investigation Tutorial](/main/docs/basic-investigation-tutorial)
  + [Opportunity Stages](/main/docs/opportunity-stages)
  + [Opportunity Report](/main/docs/opportunity-report)
    - [Incident Review Templates](/main/docs/incident-review-templates)
    - [Opportunity Tags](/main/docs/opportunity-tags)
    - [Related Opportunities](/main/docs/related-opportunities)
    - [Narrative Builder](/main/docs/narrative-builder)
    - [Narrative Builder Tutorial](/main/docs/narrative-builder-tutorial)
    - [View Opportunity Participant Data](/main/docs/see-participant-information)
    - [Collect Action Items](/main/docs/collect-action-items)
  + [Opportunity Notes](/main/docs/opportunity-notes)
  + [Opportunity Events](/main/docs/opportunity-events)
* [Jeli Learning Center](/main/docs/learning-center)
* [View People in Jeli](/main/docs/view-people-in-jeli)
* [Jeli Settings and Integrations](/main/docs/jeli-settings-and-integrations)
  + [Entra ID Integration | Jeli](/main/docs/entra-id-integration-jeli)
  + [Google Meet Integration | Jeli](/main/docs/google-meet-integration-jeli)
  + [Jira Integration | Jeli](/main/docs/jira-integration-jeli)
  + [Nobl9 Integration | Jeli](/main/docs/nobl9-integration-jeli)
  + [Okta Integration | Jeli](/main/docs/okta-integration-jeli)
  + [Opsgenie Integration | Jeli](/main/docs/opsgenie-integration-jeli)
  + [PagerDuty Integration | Jeli](/main/docs/pagerduty-integration-jeli)
  + [ServiceNow Integration | Jeli](/main/docs/servicenow-integration-jeli)
  + [Slack Integration | Jeli](/main/docs/slack-integration-jeli)
  + [Statuspage Integration | Jeli](/main/docs/statuspage-integration-jeli)
  + [Vanta Integration | Jeli](/main/docs/vanta-integration-jeli)
  + [Zoom Integration | Jeli](/main/docs/zoom-integration-jeli)
  + [Import HR Data](/main/docs/import-hr-data)
  + [Jeli API](/main/docs/jeli-api)

Security
--------

* [PagerDuty and CISA 0-Day Vulnerability Remediation Timelines](/main/docs/pagerduty-and-cisa-0-day-vulnerability-remediation-timelines)
* [PagerDuty Log4j Zero-Day Vulnerability Updates](/main/docs/pagerduty-log4j-zero-day-vulnerability)
* [PagerDuty Runbook Automation Self-Hosted / Rundeck Key Pair Misconfiguration](/main/docs/pagerduty-rundeck-automation-self-hosted-key-pair-misconfiguration)
* [Security Hygiene for the Current Cyber Threat Landscape](/main/docs/security-hygiene-for-the-current-cyber-threat-landscape)
* [Sisense Compromise](/main/docs/sisense-compromise)

Support
-------

* [Support Portal FAQ](/main/docs/support-portal-faq)

Email Management: Filters and Rules
===================================

Use filters and create rules to customize how email integrations process events

[Email integrations](/main/docs/email-integration-guide) allow users to integrate PagerDuty with any service capable of sending email alerts. PagerDuty provides a number of features to assist with administering email integrations, which can be broken down into the two following broad categories:

* [Email Filters](#email-filters)
* [Email Management](#email-management)

Email Filters
=============

Email filters allow you to determine which messages your email integration should accept. Only messages that meet your specified criteria will trigger an incident. Messages that do not pass the filter will be discarded.

Configure an Email Filter
-------------------------

To set up an email filter, in the web app:

1. Go to **Services**  **Service Directory** and select the service with the desired email integration.
2. Select the **Integrations** tab   next to the email integration you want to edit  click **Edit Integration**.
3. In the section **Email Filters**, make a selection from the dropdown, depending on your needs:
   * **Accept all incoming email**: PagerDuty will not filter out any emails that are sent to your integration email address.
   * **Accept email only if it matches ONE OR MORE rules below**: Emails will only be accepted if they match at least one filter rule.
   * **Accept email only if it matches ALL of the rules below**: Emails will only be accepted if they match all filter rules.
4. Configure appropriate rules:
   * The dropdowns for **subject**, **body**, and **from** default to **is anything**. Next to your desired field, select the appropriate action (**matches the regex** or **does not match the regex**) and enter a [regular expression](/main/docs/regular-expressions).
5. *Optional:* If required, click **Add New Rule** and repeat the previous step to add more filtering criteria.
6. Click **Save**.

Delete an Email Filter
----------------------

1. Go to **Services**  **Service Directory** and select the service with the desired email integration.
2. Select the **Integrations** tab, then  next to the email integration you want to edit, then click **Edit Integration**.
3. Click  in the top right of the email filter youâ€™d like to delete.

![Delete an email filter](https://files.readme.io/74f95dd-image4.png "Delete an email filter")



Delete an email filter



4. Click **Save changes**.

Email Filter Example
--------------------

Below is an example of how to configure email filters based on an eventâ€™s critical/noncritical status. In this example, you have a system that sends emails with the subjects `CRITICAL` and `NONCRITICAL` to PagerDuty, but you only want those with `CRITICAL` in the subject line to trigger incidents.

1. In the web app, go to **Services**  **Service Directory** and select the **name** of the service with an email integration.
2. Select the **Integrations** tab  click  to the right of the email integration you want to edit  click **Edit Integration**.
3. Under **Email Filters**, select **Accept email only if it matches ALL of the rules below**.
4. Add two filter rules:
   1. For the first rule, enter **The email subject matches the regex** `CRITICAL`.
   2. For the second rule, enter **The email subject does not match the regex** `NONCRITICAL`.

![Email filters for "CRITICAL" and "NONCRITICAL"](https://files.readme.io/1b16a53-86365ce-Screen_Shot_2017-02-07_at_1.45.09_PM.png "Email filters for \"CRITICAL\" and \"NONCRITICAL\"")



Email filters for "CRITICAL" and "NONCRITICAL"



* The option **Accept email only if it matches ALL of the rules below** ensures that both rules will be applied to incoming events. A second filter for `NONCRITICAL` is needed, since it contains the substring `CRITICAL`. In other words, the second rule prevents messages with the subject `NONCRITICAL` from triggering incidents, since it also matches the regex `CRITICAL`. Please also note that regex is [case sensitive](#case-sensitivity).

5. Click **Save changes**.

Email Management
================

By default, PagerDuty opens a new incident every time an email is received at the integration address of an email integration. Depending on how your monitoring tool works and your organizationâ€™s needs, this behavior might not be desirable.

As a first step, we recommend configuring one or more [email filters](#email-filters) to ensure that your service only accepts valid email events.

When your email filters determine that an event is valid, you can use email management rules to fine tune how the events behave. For example, the email management feature allows you to create custom rules that parse inbound messages and automatically resolve incidents.

* [Configure When Incidents or Alerts Trigger](#configure-when-incidents-or-alerts-trigger)
* [Trigger and Resolve Alerts/Incidents](#trigger-and-resolve-alertsincidents)

Configure When Incidents or Alerts Trigger
------------------------------------------

You can control when PagerDuty creates new incidents or alerts in response to emails by adjusting your email integrationâ€™s settings in the web app:

1. Navigate to **Services**  **Service Directory**.
2. Select the **name** of the service with the desired email integration  **Integrations** tab   to the right email integration  click **Edit Integration**.
3. In the section **Email Management**, select your desired setting:

* **Open a new incident/alert for each new trigger email subject** (default): Emails with the same subject line will deduplicate. For example, if PagerDuty triggers an incident in response to an email with the subject `Host Down`, subsequent emails with the same subject will *not* trigger a new incident. You will find the new email appended to the existing *alert's* timeline.
* **Open a new incident/alert for each trigger email**: Each email sent to the integration email address opens a new incident.
* **Open a new incident/alert only if an open incident does not already exist**: The integration will only trigger one open incident at any time. If an email is received while the integration already has an open incident (regardless of its subject line), it is appended to the existing incidentâ€™s activity log.
* **Open and resolve incidents/alerts based on custom rules**: This option is explored in-depth in the section [Trigger and Resolve Alerts/Incidents](#trigger-and-resolve-alertsincidents).

4. Click **Save**.

Trigger and Resolve Alerts/Incidents
------------------------------------

Selecting the option **Open and resolve alerts/incidents based on custom rules** allows you to configure rules that determine when an incident should trigger and resolve, based on the messageâ€™s content.

There are two components to configure, and both are accessed in the web app by navigating to **Services**  **Service Directory**  select the **name** of your desired service  **Integrations** tab  click  next to the desired email integration  click **Edit Integration**:

* [Create a Trigger Rule](#create-a-trigger-rule)
* [Create a Resolve Rule](#create-a-resolve-rule)

### Create a Trigger Rule

1. From the dropdown, select **trigger**.
2. Select **Any (default)** or **All** depending on whether youâ€™d like to trigger an incident when any or all following conditions match.

![Trigger rule](https://files.readme.io/8e277ac-image6.png "Trigger rule")



Trigger rule



3. **Determine the matching condition:**
   * Select from the dropdown whether youâ€™d like to match on the email **from address**, **subject** or **body**.
   * Select from the following matching options:
     + **contains**
     + **does not contain**
     + **matches the regular expression**
     + **does not match the regular expression**
     + **exactly matches**
     + **is anything except**
   * Enter your desired matching criteria
4. *Optional:* If youâ€™d like to configure more than one trigger condition, click **New Condition** and repeat step 3.
5. **Configure an incident/alert key:** It is important that this information matches in the corresponding [resolve rule](#create-a-resolve-rule).
   * In the section **Alert/Incident Key**, select **subject** or **body** from the dropdown.
   * Select from the following matching options:
     + **all text between**
     + **this regular expression**
     + **everything**
     + **all text after**
     + **all text before**

> ðŸ“˜ Use Regex to Extract an Incident/Alert Key
> --------------------------------------------
> 
> If you plan to use a regular expression to generate the unique key for an incident/alert, please refer to the section [Use Regex to Extract an Incident/Alert Key](/main/docs/regular-expressions#use-regex-to-extract-a-deduplicationalert-key) for more information.

6. *Optional:* **Configure Custom Fields**. This feature can be helpful if your trigger emails contain information that youâ€™d like to be included in incident details.
   * Enter a **Name** for the field.
   * **Configure the Value:**
     + Select **subject** or **body** from the dropdown.
     + Select from the following matching options:
       - **all text between**
       - **this regular expression**
       - **everything**
       - **all text after**
       - **all text before**
     + You may add more custom fields by clicking **New custom field** and repeating the steps above.
7. Click **Save changes**.

### Create a Resolve Rule

A resolve rule is required if youâ€™d like incidents to automatically resolve when PagerDuty receives a valid email event.

> ðŸ“˜ Auto-Resolve Using an Alert/Incident Key
> ------------------------------------------
> 
> For a pair of email management [trigger](#create-a-trigger-rule) and resolve rules to work together, the alert/incident key in both rules *must be a perfect match*. The alert/incident key is what allows your service to pair events and apply resolve rules to open incidents.

1. Select **Add Another Rule** at the bottom of the page.

![Add another rule](https://files.readme.io/78e054a-image5.png "Add another rule")



Add another rule



2. Configure the resolve rule similarly to the [trigger rule](#create-a-trigger-rule), however you will select **resolve** from the dropdown, and configure the condition(s) that should resolve incidents/alerts. The information for **Incident/Alert Key** should *exactly* match the corresponding trigger rule.

![Resolve rule](https://files.readme.io/f4ec6e0-image7.png "Resolve rule")



Resolve rule



> ðŸ“˜ No Matching Open Incident
> ---------------------------
> 
> If an email matches your "resolve" rule but there is no open incident for that email to resolve *OR* the email's incident key does not match an existing open incident, then this rule will not be applied.

### Create Multiple Rules

In some cases, you may want to create more than one trigger and/or resolve rules. To do this, click **Add Another Rule**.

When you create multiple email management rules, PagerDuty will attempt to apply the first rule to the incoming email. If it does not match it will attempt to apply the second rule, and so on. The hierarchy continues in this order until it reaches your last rule. There is a limit of ten rules per service.

You can change the order rules are applied in by clicking **Move up** and **Move down** buttons on each rule.

![Move rule up or down](https://files.readme.io/6799e4f-image8.png "Move rule up or down")



Move rule up or down



### Configure Default Behavior If No Rules Match

If an email does not match any email management rules, you can configure whether youâ€™d like to create a generic alert or discard the email.

Select your preference from the dropdown:

* **create a generic alert**
  + Generic alerts will use the emailâ€™s subject line as the name of the incident. **Note**: Email events, which *do not* match management rules, but *do* have matching subject lines, will deduplicate into the same alert.
* **discard it**

![Configure default behavior](https://files.readme.io/85ad257-image2.png "Configure default behavior")



Configure default behavior



Delete an Email Management Rule
-------------------------------

1. Go to **Services**  **Service Directory** and select the service with the desired email integration.
2. Select the **Integrations** tab, then  next to the email integration you want to edit, then click **Edit Integration**.
3. Click  in the top right of the email management rule youâ€™d like to delete.

![Delete email management rule](https://files.readme.io/99d7a21-image3.png "Delete email management rule")



Delete email management rule



4. Click **Save changes**.

Email Management Example
------------------------

In this example, you want to trigger an incident when PagerDuty receives an email (from a monitoring system, for example) that contains `DOWN` in the subject line. The body of email is always formatted such that a numeric string representing the host follows â€œHost: â€œ, which can be used as the incident/alert key. We can use a [regular expression] to for this: `Host: (\d+)`.

1. [Create a trigger rule](#create-a-trigger-rule) that captures the scenario outlined above.

![Email management trigger rule](https://files.readme.io/ab0d821-image1.png "Email management trigger rule")



Email management trigger rule



2. [Create a resolve rule](#create-a-resolve-rule)

![Email management resolve rule](https://files.readme.io/d2f5ca2-image3.png "Email management resolve rule")



Email management resolve rule



With the email management rules in place, when â€‹â€‹PagerDuty receives an appropriate email that meets your trigger ruleâ€™s conditions, an incident will trigger.

![Trigger email](https://files.readme.io/5548341-image4.png "Trigger email")



Trigger email



Similarly, when the email integration receives an appropriate resolve message, the incident will automatically resolve

![Resolve email](https://files.readme.io/302a26d-image2.png "Resolve email")



Resolve email



Troubleshoot Email Management Rules
-----------------------------------

Here are some solutions to issues that may come up when working with email management rules:

* [Replies and Email Forwards Trigger a New Incident](#replies-and-email-forwards-trigger-a-new-incident)
* [Trigger Emails are not Accepted](#trigger-emails-are-not-accepted)
* [Resolve Emails are not Resolving Incidents](#resolve-emails-are-not-resolving-incidents)
* [Capture Group Error Message](#capture-group-error-message)
* [A Regular Expression is Not Matching the Email Body as Expected](#a-regular-expression-is-not-matching-the-email-body-as-expected)

### Replies and Email Forwards Trigger a New Incident

By default, PagerDuty email integrations accept any messages from any sender, including messages addressed to multiple recipients. When someone replies to all recipients on an email with recipients that include the email integration address, an email will be sent to the email integration address. This can result in a new incident triggering, in addition to the original incident.

You can configure an email management [trigger rule](#create-a-trigger-rule) to prevent replies and forwards from triggering duplicate incidents:

1. Configure the rule to **trigger** an alert/incident if **Any of the following conditions apply**.
2. Configure a condition: The email **subject matches the regular expression:** `.*`
3. For the incident/alert key, have the rule state: **In the email subject, match this regular expression:** `(?:(?i)re: |fwd: )?(.*)`.
   * This regular expression is case insensitive, so any variation of "RE:" or "FWD:" will deduplicate into the open incident.
4. Click **Save changes**.

> ðŸ“˜ Case Insensitive
> ------------------
> 
> This regular expression is case insensitive, so any version of "RE:" or "FWD:" will deduplicate the email trigger into the open incident.

![Deduplicate replies and forwards](https://files.readme.io/8291ef1-2b2ad20-RE_-_Email_Parse_-_PagerDuty.jpg "Deduplicate replies and forwards")



Deduplicate replies and forwards



Replies and forwards will now be appended to the existing incidentâ€™s timeline.

### Trigger Emails are not Accepted

First, check your [email filters](#email-filters). PagerDuty evaluates email filters before management rules in order to reduce noise and ensure all emails come from a verified source.

If you think the filters might be dropping email, try setting them to **Accept all incoming email** and test again. Keep in mind that changes to your email filters will not affect events that were received before the changes were made.

If you are using email filters, double-check your [regular expressions](/main/docs/regular-expressions) to ensure that desired emails are accepted.

If emails are still not triggering incidents as youâ€™d expect, check the integrationâ€™s [default behavior](#configure-default-behavior-if-no-rules-match); **Create a generic alert** should be selected. This is the default setting, but if another user changed it, for example, any unmatched emails will be discarded.

### Resolve Emails are not Resolving Incidents

Three things are required to successfully resolve an incident:

1. A rule that [triggers](#create-a-trigger-rule) an incident in PagerDuty.
2. A rule that [resolves](#create-a-resolve-rule) an incident in PagerDuty.
3. A shared incident key that can be extracted from both emails.

Verify that your rules are correct. PagerDuty will display the extracted incident key on an incidentâ€™s details page. Use this piece of information to verify that the key is the same in both the trigger and resolve emails.

![Extracted incident key](https://files.readme.io/9543e47-0e9dd37-email_management_2_.png "0e9dd37-email_management_2_.png")



Extracted incident key



Specific reasons a resolve email might not be successfully resolving:

* There is an issue with a [regular expression extracting the incident/alert key](/main/docs/regular-expressions#use-regex-to-extract-a-deduplicationalert-key).
* There is an issue with the email bodyâ€™s encoding (for example, if it was UTF-8 encoded, but contained the byte `\xFF`).
* There is a trailing space, for example, in either your [trigger rule](#create-a-trigger-rule) or [resolve rule](#create-a-resolve-rule), but not in both. This means that one email has an incident/alert key with an additional space, and therefore will not match.

### Capture Group Error Message

If you receive the following error, it means that you need to specify a capture group in your [regular expression](/main/docs/regular-expressions#capture-group):

`Email handler email action rules value extractors matcher must have at least one capture group`

Oftentimes, this can be resolved by enclosing your regular expression in parentheses.

### A Regular Expression is Not Matching the Email Body as Expected

If a regular expression that should match the email body is not working for some reason, check to see whether emails are sent in both plain text and HTML, or plain text. If the emails are only sent in HTML, the HTML tags may be interfering with the regexâ€™s pattern matching.

If the email also includes a plain text version, then the rule will still be able to find a match. However, if the emails are being sent as HTML-only, note that the regular expression may not match because there are HTML tags and elements interspersed within the text content that makes up the searched-for pattern. It may help to view the raw email that was checked for a match in the email rules.

> ðŸ“˜ View the Email Source Code
> ----------------------------
> 
> Go to **View Message** in the incident detail view. This will take you to a page displaying the full details of the original event sent in. The URL should be formatted as follows:
> 
> ```
> https://{subdomain}.pagerduty.com/incidents/{incident_id}/log_entries/{log_entry_id}
> 
> ```
> 
> Next, click **View Raw Message** to see the emailâ€™s source code, including headers.

While viewing the source code, note that email management rules that operate on the body of the email use the raw body as input, after decoding (i.e., if the bodyâ€™s `Content-Transfer-Encoding` is `base64`, it will be decoded from Base64, or if it's `quoted-printable`, then QP escape sequences will be replaced with the actual characters that represent the messageâ€™s underlying content). With this in mind, to view the true source of the email that the regular expressions are compared against, one must decode the text.

#### Base64-encoded Text

Base64-encoded messages will show the following information in their header:

```
Content-Transfer-Encoding: base64

```

[Base64](https://en.wikipedia.org/wiki/Base64)-encoded messages are not humanly readable, but are easily decoded into plain text using readily available software. We recommend the `base64` command line program, which is found on many Linux-based and Unix-based systems, including macOS.

> ðŸ“˜ Example of Base64-encoded text
> --------------------------------
> 
> **Decoded** (Regex runs on this text):
> 
> ```
> All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
> The quick fox jumps over the lazy brown dog.
> 
> ```
> 
> **Encoded** (Regex does not run on this text):
> 
> ```
> QWxsIHdvcmsgYW5kIG5vIHBsYXkgbWFrZXMgSmFjayBhIGR1bGwgYm95LiBBbGwgd29yayBhbmQg
> bm8gcGxheSBtYWtlcyBKYWNrIGEgZHVsbCBib3kuClRoZSBxdWljayBmb3gganVtcHMgb3ZlciB0
> aGUgbGF6eSBicm93biBkb2cuCg=
> 
> ```
> 
> Decoding with `base64`:
> 
> ```
> base64 -D < file-containing-base64-message.txt
> # or this:
> cat file-containing-base64-message.txt | base64 -D
> 
> ```

#### Quoted-Printable Text

Quoted-Printable messages will show the following information in their header:

```
Content-Transfer-Encoding: quoted-printable

```

Messages with [Quoted-Printable](https://en.wikipedia.org/wiki/Quoted-printable) encoding can be easier for humans to read, but a variety of tools are available for decoding them.

When reading raw Quoted-Printable encoded text, please be aware of *escape sequences* that constitute part of the encoding, or that are a representation of a character and not the literal character. Non-[ASCII](https://en.wikipedia.org/wiki/ASCII) characters will be represented as escape sequences, as will equals signs (`=`).

Furthermore, lines are limited to 76 characters. If a lineâ€™s length needs to be limited, a line may be encoded as two or more lines with a line break and an equals sign at the end of every line except the last in the series.

> ðŸ“˜ Example of Quoted-Printable encoding
> --------------------------------------
> 
> **Decoded** (Regex runs on this text):
> 
> ```
> All work and no play makes Jack a dull boy. All work and no play makes Jack a dull boy.
> The quick fox jumps over the lazy brown dog.
> E = mc^2
> 
> ```
> 
> **Encoded** (Regex does not run on this text):
> 
> ```
> All work and no play makes Jack a dull boy. All work and no play makes Jack=
>  a dull boy.
> The quick fox jumps over the lazy brown dog.
> E =3D mc^2
> 
> ```

Regular Expressions
===================

Please see our [Regular Expressions](/main/docs/regular-expressions) article for more information.

Updated 5 months ago

---

* [Table of Contents](#)
* + [Email Filters](#email-filters)
    - [Configure an Email Filter](#configure-an-email-filter)
    - [Delete an Email Filter](#delete-an-email-filter)
    - [Email Filter Example](#email-filter-example)
  + [Email Management](#email-management)
    - [Configure When Incidents or Alerts Trigger](#configure-when-incidents-or-alerts-trigger)
    - [Trigger and Resolve Alerts/Incidents](#trigger-and-resolve-alertsincidents)
    - [Delete an Email Management Rule](#delete-an-email-management-rule)
    - [Email Management Example](#email-management-example)
    - [Troubleshoot Email Management Rules](#troubleshoot-email-management-rules)
  + [Regular Expressions](#regular-expressions)
