

Getting Started
---------------

* [Introduction](/main/docs/introduction)
* [Trial Account Onboarding](/main/docs/trial-account-onboarding)
* [Log In to PagerDuty](/main/docs/log-in-to-pagerduty)
* [Navigate the Incidents Page](/main/docs/navigate-the-incidents-page)
* [Best Practice Ops Guides](https://www.pagerduty.com/ops-guides/)

Incidents
---------

* [Incidents](/main/docs/incidents)
  + [Edit Incidents](/main/docs/edit-incidents)
  + [Reassign Incidents](/main/docs/reassign-incidents)
  + [Incident Priority](/main/docs/incident-priority)
  + [Incident Roles](/main/docs/incident-roles)
  + [Incident Tasks](/main/docs/incident-tasks)
  + [Incident Types](/main/docs/incident-types)
  + [Custom Fields on Incidents](/main/docs/custom-fields-on-incidents)
  + [Why Incidents Fail to Trigger](/main/docs/why-incidents-fail-to-trigger)
  + [Conference Bridge](/main/docs/conference-bridge)
  + [Add Responders](/main/docs/add-responders)
  + [Event Management](/main/docs/event-management)
  + [Dynamic Notifications](/main/docs/dynamic-notifications)
  + [Communicate with Stakeholders](/main/docs/communicate-with-stakeholders)
  + [Status Update Templates](/main/docs/status-update-templates)
* [Alerts](/main/docs/alerts)
  + [Alerts Table](/main/docs/alerts-table)
* [Postmortems and Jeli Post Incident Reviews](/main/docs/postmortems)
* [Visibility Console](/main/docs/visibility-console)

Notifications
-------------

* [Notification Content and Behavior](/main/docs/notification-content-and-behavior)
  + [Push Notifications](/main/docs/push-notifications)
  + [Email Notifications](/main/docs/email-notifications)
  + [Phone Notifications](/main/docs/phone-notifications)
    - [Phone Notification Disclosures](/main/docs/phone-notification-disclosures)
  + [SMS Notifications](/main/docs/sms-notifications)
    - [SMS Notification Disclosures](/main/docs/sms-notification-disclosures)
* [Notification Troubleshooting](/main/docs/notification-troubleshooting)
  + [Expected Notification Behavior](/main/docs/expected-notification-behavior)
  + [Push Notification Troubleshooting](/main/docs/push-notification-troubleshooting)
  + [Email Notification Troubleshooting](/main/docs/email-notification-troubleshooting)
  + [Phone Notification Troubleshooting](/main/docs/phone-notification-troubleshooting)
  + [SMS Notification Troubleshooting](/main/docs/sms-notification-troubleshooting)
* [Supported Countries](/main/docs/supported-countries)
* [Notification Phone Numbers](/main/docs/notification-phone-numbers)

Services
--------

* [Services and Integrations](/main/docs/services-and-integrations)
  + [Service Directory](/main/docs/service-directory)
  + [Service Profile](/main/docs/service-profile)
  + [Business Services](/main/docs/business-services)
    - [Business Service Subscription](/main/docs/business-service-subscription)
  + [Service Graph](/main/docs/service-graph)
  + [Maintenance Windows](/main/docs/maintenance-windows)
  + [Email Management: Filters and Rules](/main/docs/email-management-filters-and-rules)
  + [Regular Expressions](/main/docs/regular-expressions)
* [Configurable Service Settings](/main/docs/configurable-service-settings)
* [Integrate PagerDuty With ITSM Tools](/main/docs/integrating-with-itsm-tools)

People
------

* [Manage Users](/main/docs/manage-users)
  + [Import Users from a CSV](/main/docs/import-users-from-a-csv)
  + [Offboarding](/main/docs/offboarding)
* [User Roles](/main/docs/user-roles)
* [Advanced Permissions](/main/docs/advanced-permissions)
* [User Profile](/main/docs/user-profile)
* [Teams](/main/docs/teams)
* [Contextual Search - Tagging](/main/docs/contextual-search)
* [Schedule Basics](/main/docs/schedule-basics)
  + [Edit Schedules](/main/docs/edit-schedules)
* [Schedule Examples](/main/docs/schedule-examples)
* [Schedules in Third-Party Apps](/main/docs/schedules-in-apps)
* [My On-Call Shifts](/main/docs/my-on-call-shifts)
* [Escalation Policy Basics](/main/docs/escalation-policies)
  + [Round Robin Scheduling](/main/docs/round-robin-scheduling)
* [Escalation Policies and Schedules](/main/docs/escalation-policies-and-schedules)

Integrations
------------

* [Amazon CloudWatch Integration Guide | PagerDuty](/main/docs/amazon-cloudwatch-integration-guide)
* [Amazon EventBridge Integration Guide | PagerDuty](/main/docs/amazon-eventbridge-integration-guide)
* [Amazon GuardDuty Integration Guide | PagerDuty](/main/docs/aws-guardduty-integration-guide)
* [AWS CloudTrail Integration Guide | PagerDuty](/main/docs/aws-cloudtrail-integration-guide)
* [AWS Health Dashboard Integration Guide | PagerDuty](/main/docs/aws-health-dashboard)
* [AWS Security Hub Integration Guide | PagerDuty](/main/docs/aws-security-hub-integration-guide-pagerduty)
* [Bitbucket Integration Guide | PagerDuty](/main/docs/bitbucket)
* [Datadog Apps Integration Guide | PagerDuty](/main/docs/datadog-apps-integration-guide)
* [Email Integration Guide | PagerDuty](/main/docs/email-integration-guide)
* [GitHub Changes Integration Guide | PagerDuty](/main/docs/github-changes)
* [GitLab Changes Integration Guide | PagerDuty](/main/docs/gitlab-changes)
* [Jenkins Changes Integration Guide | PagerDuty](/main/docs/jenkins-changes)
* [Jira Cloud Integration Guide | PagerDuty](/main/docs/jira-cloud)
  + [Jira Cloud User Guide](/main/docs/jira-cloud-user-guide)
  + [Jira Cloud Integration FAQ](/main/docs/jira-cloud-integration-faq)
  + [Jira Cloud Troubleshooting Guide](/main/docs/jira-cloud-troubleshooting-guide)
* [Jira Server Integration Guide | PagerDuty](/main/docs/jira-server)
  + [Jira Server Troubleshooting Guide](/main/docs/jira-server-troubleshooting-guide)
* [Microsoft Teams Integration Guide | PagerDuty](/main/docs/microsoft-teams)
  + [Microsoft Teams User Guide](/main/docs/microsoft-teams-user-guide)
  + [Microsoft Teams Permission Changelog](/main/docs/microsoft-teams-permission-changelog)
* [Salesforce Service Cloud Integration Guide | PagerDuty](/main/docs/salesforce-service-cloud-integration-guide)
  + [Salesforce Service Cloud User Guide](/main/docs/salesforce-service-cloud-user-guide)
  + [Salesforce Custom Field Mappings](/main/docs/salesforce-custom-field-mappings)
* [ServiceNow Integration Guide | PagerDuty](/main/docs/servicenow-integration-guide)
  + [ServiceNow Integration Details](/main/docs/servicenow-integration-details)
  + [ServiceNow User Guide](/main/docs/servicenow-user-guide)
  + [ServiceNow Provisioning](/main/docs/servicenow-provisioning)
  + [Advanced ServiceNow Configuration](/main/docs/advanced-servicenow-configuration)
  + [ServiceNow Change Requests Integration Guide](/main/docs/servicenow-change-requests-integration-guide)
  + [ServiceNow Troubleshooting Guide](/main/docs/servicenow-troubleshooting-guide)
* [ServiceNow CSM Integration Guide](/main/docs/servicenow-csm-integration-guide)
  + [ServiceNow CSM User Guide](/main/docs/servicenow-csm-user-guide)
* [Slack Integration Guide | PagerDuty](/main/docs/slack-integration-guide)
  + [Slack User Guide](/main/docs/slack-user-guide)
  + [Slack Permission Changelog](/main/docs/slack-permission-changelog)
* [Zendesk Integration Guide | PagerDuty](/main/docs/zendesk-integration-guide)
  + [Zendesk User Guide](/main/docs/zendesk-user-guide)
  + [Zendesk Custom Field Mappings](/main/docs/zendesk-custom-field-mappings)
* [Zoom Integration Guide | PagerDuty](/main/docs/zoom-integration-guide)
* [Nagios Troubleshooting Guide](/main/docs/nagios-troubleshooting-guide)
* [PagerDuty Agent Integration Guide](/main/docs/pagerduty-agent-integration-guide)
* [PagerDuty Agent Troubleshooting Guide](/main/docs/pagerduty-agent-troubleshooting-guide)
* [SolarWinds Orion Troubleshooting Guide](/main/docs/solarwinds-orion-troubleshooting-guide)
* [Zabbix Troubleshooting Guide](/main/docs/zabbix-troubleshooting-guide)
* [Extensions](/main/docs/extensions)
* [Add-ons](/main/docs/add-ons)
* [Webhooks](/main/docs/webhooks)
* [Custom Incident Actions](/main/docs/custom-incident-actions)
* [Single Sign-On (SSO)](/main/docs/sso)
* [Live Call Routing](/main/docs/live-call-routing)
* [Apps](/main/docs/apps)

Automation
----------

* [PagerDuty Automation Actions](/main/docs/automation-actions)
  + [PagerDuty Automation Trial](/main/docs/pagerduty-automation-trial)
* [Incident Workflows](/main/docs/incident-workflows)
  + [Workflow Integrations](/main/docs/workflow-integrations)
  + [Workflow Actions](https://support.pagerduty.com/actions/docs/incident-workflow-actions-overview)
* [PagerDuty Workflow Automation](https://help.catalytic.com/)
* [PagerDuty Runbook Automation](https://docs.rundeck.com/docs/)

Generative AI
-------------

* [PagerDuty Advance](/main/docs/pagerduty-advance)

AIOps
-----

* [PagerDuty AIOps](/main/docs/aiops)
  + [PagerDuty AIOps Quickstart Guide](/main/docs/pagerduty-aiops-quickstart-guide)
  + [Intelligent Alert Grouping](/main/docs/intelligent-alert-grouping)
    - [Preview Intelligent Alert Grouping](/main/docs/preview-intelligent-alert-grouping)
  + [Content-Based Alert Grouping](/main/docs/content-based-alert-grouping)
  + [Unified Alert Grouping](/main/docs/unified-alert-grouping)
  + [Global Alert Grouping](/main/docs/global-alert-grouping)
  + [Time-Based Alert Grouping](/main/docs/time-based-alert-grouping)
  + [Auto-Pause Incident Notifications](/main/docs/auto-pause-incident-notifications)
  + [Alert Suppression](https://support.pagerduty.com/docs/event-orchestration#incident-data)
  + [Past Incidents](/main/docs/past-incidents)
  + [Related Incidents](/main/docs/related-incidents)
  + [Outlier Incident](/main/docs/outlier-incident)
  + [Probable Origin](/main/docs/probable-origin)
  + [Recent Changes](/main/docs/recent-changes)
  + [Event Orchestration](/main/docs/event-orchestration)
    - [Event Orchestration Cache Variables](/main/docs/event-orchestration-cache-variables)
    - [Event Orchestration Examples](/main/docs/event-orchestration-examples)
  + [Operations Console](/main/docs/operations-console)
* [Legacy Event Intelligence](/main/docs/legacy-event-intelligence)
* [Rulesets](/main/docs/rulesets)
* [Migrate to Event Orchestration](/main/docs/migrate-to-event-orchestration)

Analytics
---------

* [Analytics Dashboard](/main/docs/analytics-dashboard)
* [Insights](/main/docs/insights)
* [Operational Reviews](/main/docs/operational-reviews)
* [On-Call Readiness Reports](/main/docs/on-call-readiness-reports)
* [Event Analytics](/main/docs/event-analytics)
* [PagerDuty Advance Analytics](/main/docs/pagerduty-advance-analytics)
* [User Onboarding Report](/main/docs/user-onboarding-report)
* [Recommendations](/main/docs/recommendations)
* [Audit Trail Reporting](/main/docs/audit-trail-reporting)
* [PagerDuty Analytics Slack Integration](/main/docs/pagerduty-analytics-slack-integration)
* [Operational Maturity](/main/docs/operational-maturity)

APIs
----

* [APIs Overview](https://developer.pagerduty.com/docs/ZG9jOjQ2NDA2-introduction)
* [API Access Keys](/main/docs/api-access-keys)
  + [REST API Rate Limits](/main/docs/rest-api-rate-limits)
* [Developer Documentation](https://v2.developer.pagerduty.com/docs)
* [API Client Libraries](https://developer.pagerduty.com/docs/tools-libraries/client-libraries/?utm_source=web&utm_campaign=kb_nav&utm_medium=link)
* [Safelist IPs](/main/docs/safelist-ips)
* [Third-Party Tools](/main/docs/third-party-tools)
  + [API Tools & Code Samples](https://developer.pagerduty.com/docs/tools-libraries/tools-projects/?utm_source=web&utm_campaign=kb_nav&utm_medium=link)

Status
------

* [Status Pages Overview](/main/docs/status-pages-overview)
* [Internal Status Page](/main/docs/internal-status-page)
* [External Status Page](/main/docs/external-status-page)
  + [Private Status Page](/main/docs/private-status-page)

Billing and Account Settings
----------------------------

* [Billing, Invoices and Payments](/main/docs/billing-invoices-payments)
  + [Form W-9](/main/docs/w-9)
  + [Vendor Form](/main/docs/vendor-form)
  + [Cancel Your Account](/main/docs/cancel-your-account)
* [Account Settings](/main/docs/account-settings)
* [Account Subdomains](/main/docs/account-subdomains)
* [Time Zone Settings](/main/docs/time-zone-settings)

Mobile App
----------

* [Training Material](https://university.pagerduty.com/page/on-demand#new-to-pagerduty_getting-started)
* [PagerDuty Mobile App](/main/docs/mobile-app)
  + [Mobile Home Screen](/main/docs/mobile-home-screen)
  + [Mobile Widgets](/main/docs/mobile-widgets)
* [Mobile App Settings](/main/docs/mobile-app-settings)
* [Use Mobile Schedules](/main/docs/use-mobile-schedules)
* [Mobile Status Dashboard](/main/docs/mobile-status-dashboard)
  + [Home Screen Status Dashboard](/main/docs/home-screen-status-dashboard)
* [MDM Setup and Supported Web Browsers](/main/docs/mdm-setup-browsers)
* [Mobile Release Notes](/main/docs/release-notes)

Platform
--------

* [What's New in PagerDuty](https://www.pagerduty.com/whats-new)
* [Platform Release Notes](/main/docs/platform-release-notes)
  + [Platform Release Notes (2023)](/main/docs/platform-release-notes-2023)
  + [Platform Release Notes (2022)](/main/docs/platform-release-notes-2022)
  + [Platform Release Notes (2021)](/main/docs/platform-release-notes-2021)
  + [Platform Release Notes (2020)](/main/docs/platform-release-notes-2020)
  + [Platform Release Notes (2019)](/main/docs/platform-release-notes-2019)
  + [Platform Release Notes (2018)](/main/docs/platform-release-notes-2018)
  + [Platform Release Notes (2017)](/main/docs/platform-release-notes-2017)
* [System Requirements](/main/docs/system-requirements)
* [Common Event Format (PD-CEF)](/main/docs/pd-cef)
* [Search](/main/docs/search)
* [PagerDuty Outage Notifications](/main/docs/pagerduty-outage-notifications)
* [Service Regions](/main/docs/service-regions)

Jeli part of PagerDuty
----------------------

* [Get Started With Jeli](/main/docs/get-started-with-jeli)
* [Jeli Incidents](/main/docs/jeli-incidents)
  + [Jeli Slackbot Commands](/main/docs/jeli-slackbot-commands)
  + [Mitigate a Jeli Incident](/main/docs/mitigate-an-incident)
* [Jeli Workflows](/main/docs/jeli-workflows)
* [Jeli Opportunities](/main/docs/opportunities)
  + [Basic Investigation Tutorial](/main/docs/basic-investigation-tutorial)
  + [Opportunity Stages](/main/docs/opportunity-stages)
  + [Opportunity Report](/main/docs/opportunity-report)
    - [Incident Review Templates](/main/docs/incident-review-templates)
    - [Opportunity Tags](/main/docs/opportunity-tags)
    - [Related Opportunities](/main/docs/related-opportunities)
    - [Narrative Builder](/main/docs/narrative-builder)
    - [Narrative Builder Tutorial](/main/docs/narrative-builder-tutorial)
    - [View Opportunity Participant Data](/main/docs/see-participant-information)
    - [Collect Action Items](/main/docs/collect-action-items)
  + [Opportunity Notes](/main/docs/opportunity-notes)
  + [Opportunity Events](/main/docs/opportunity-events)
* [Jeli Learning Center](/main/docs/learning-center)
* [View People in Jeli](/main/docs/view-people-in-jeli)
* [Jeli Settings and Integrations](/main/docs/jeli-settings-and-integrations)
  + [Entra ID Integration | Jeli](/main/docs/entra-id-integration-jeli)
  + [Google Meet Integration | Jeli](/main/docs/google-meet-integration-jeli)
  + [Jira Integration | Jeli](/main/docs/jira-integration-jeli)
  + [Nobl9 Integration | Jeli](/main/docs/nobl9-integration-jeli)
  + [Okta Integration | Jeli](/main/docs/okta-integration-jeli)
  + [Opsgenie Integration | Jeli](/main/docs/opsgenie-integration-jeli)
  + [PagerDuty Integration | Jeli](/main/docs/pagerduty-integration-jeli)
  + [ServiceNow Integration | Jeli](/main/docs/servicenow-integration-jeli)
  + [Slack Integration | Jeli](/main/docs/slack-integration-jeli)
  + [Statuspage Integration | Jeli](/main/docs/statuspage-integration-jeli)
  + [Vanta Integration | Jeli](/main/docs/vanta-integration-jeli)
  + [Zoom Integration | Jeli](/main/docs/zoom-integration-jeli)
  + [Import HR Data](/main/docs/import-hr-data)
  + [Jeli API](/main/docs/jeli-api)

Security
--------

* [PagerDuty and CISA 0-Day Vulnerability Remediation Timelines](/main/docs/pagerduty-and-cisa-0-day-vulnerability-remediation-timelines)
* [PagerDuty Log4j Zero-Day Vulnerability Updates](/main/docs/pagerduty-log4j-zero-day-vulnerability)
* [PagerDuty Runbook Automation Self-Hosted / Rundeck Key Pair Misconfiguration](/main/docs/pagerduty-rundeck-automation-self-hosted-key-pair-misconfiguration)
* [Security Hygiene for the Current Cyber Threat Landscape](/main/docs/security-hygiene-for-the-current-cyber-threat-landscape)
* [Sisense Compromise](/main/docs/sisense-compromise)

Support
-------

* [Support Portal FAQ](/main/docs/support-portal-faq)

PagerDuty Agent Troubleshooting Guide
=====================================

[PagerDuty Agent](https://github.com/PagerDuty/pdagent) is an open-source utility for integrating standalone/on-premise monitoring tools with PagerDuty. This guide offers help for troubleshooting the most common issues.

* [Basic Troubleshooting](#basic-troubleshooting)
* [Outqueue Troubleshooting](#outqueue-troubleshooting)
* [Network Troubleshooting](#network-troubleshooting)
* [Testing TLS](#testing-tls)
* [Proxy Troubleshooting](#proxy-troubleshooting)

Basic Troubleshooting
=====================

If you have trouble sending events to PagerDuty using the agent, run the following checks first:

* **[Verify that the `pdagent` service is running.](/main/docs/pagerduty-agent-integration-guide#verify-the-agent-is-running)**. If the service is not running, you can start it with the command `systemctl start pdagent` (on systemd-based systems) or `sudo service pdagent start` (on SysV init-based systems). Any enqueued events that accumulated while the service was stopped will be sent when the service starts again.
* **Check the service integration key**: Make sure that the key is for the correct service and that it has been entered correctly.
* **[Send a test event using `pd-send`](https://www.pagerduty.com/docs/guides/agent-install-guide#pd-send)**. Remember to replace the key used in the example with your own PagerDuty service integration key.
* **Check the logs** for any errors, including events that couldn't be submitted to the Events API. These are typically found under `/var/log/pdagent/pdagentd.log`.

Installation Error: `pdagent.service not found`
-----------------------------------------------

Sometimes on a fresh install of the PagerDuty Agent, you might see the error message `Failed to start pdagent.service: Unit pdagent.service not found.` This is due to an error during installation where the file `pdagent.service` was not copied to the proper directory.

In order to fix this, you can copy the `pdagent.service` file into the proper directory with the following steps:

1. Find the file `pdagent.service` with the command:

Shell
```
sudo find / -name pdagent.service

```

2. Copy the location of the file.
3. Copy the file to the correct directory the command:

Shell
```
sudo cp \<PATH_TO_FILE> /etc/systemd/system

```

4. Restart the agent with `systemctl start pdagent` or `service pdagent start`, respectively, depending on whether your operating system uses `systemctl` or `service`.

Outqueue Troubleshooting
========================

In addition to [using `pd-queue` to manage the queue](/main/docs/pagerduty-agent-integration-guide#pd-queue--h), the agent's [outqueue directories](#outqueue-directories) often contain useful troubleshooting information. You can also [manually clear the queue](#manually-purge-the-queue) by working directly with the files.

Each file in the [outqueue directories](#outqueue-directories) contains the body of an HTTP POST request that will be made to the [PagerDuty Events API](https://developer.pagerduty.com/api-reference/YXBpOjI3NDgyNjU-pager-duty-v2-events-api). You can examine these files to see what your monitoring tools are submitting to the agent. File names follow the naming convention `{UNIX timestamp}_{integration key}.txt`.

Outqueue Directories
--------------------

The queue directories, located in `/var/lib/pdagent/outqueue`, include:

| Directory | Details |
| --- | --- |
| `err` | Events that `pdagent` attempts to deliver to the PagerDuty Events API, but received a `400 Invalid Request` response from PagerDuty, will be logged here. Malformed events (e.g., missing an integration key) that cannot be submitted are kept here, too. |
| `suc` | Successfully submitted events. If you see an event file cached here, it was sent to PagerDuty. If the event did not trigger an incident in PagerDuty, and you are having difficulty troubleshooting, please refer to [Why Incidents Fail to Trigger](/main/docs/why-incidents-fail-to-trigger). |
| `tmp` | Event files submitted to the agent by external processes, such as integration scripts or `pd-send`, will be stored in this directory. |
| `pdq` | The queue of events to be sent; contains a symbolic link to the files in `tmp`. |

> ðŸš§ Event Expiration and Queue Cleaning
> -------------------------------------
> 
> Events are deleted from the outqueue directories at a regular interval once their age exceeds a predefined length, in seconds. The default age threshold is one week, and the default cleaning interval is three hours. Both the interval and the age threshold are defined in the [PagerDuty Agent configuration file](https://github.com/PagerDuty/pdagent/blob/master/conf/pdagent.conf), which should be located at `/etc/pdagent.conf`:
> 
> * `cleanup_interval_secs`: The interval between when the queue is cleaned.
> * `cleanup_threshold_secs`: The age, in seconds, after which events will be deleted.

Manually Purge the Queue
------------------------

In the event of a long network outage, where a large number of events accumulate in the agentâ€™s outqueue, you can manually clear out the queue to avoid a heavy cluster of PagerDuty incidents when network connectivity is restored.

To clear the queue, run the following commands:

Shell
```
sudo rm -vf /var/lib/pdagent/outqueue/pdq/*
sudo rm -vf /var/lib/pdagent/outqueue/tmp/*

```

Network Troubleshooting
=======================

The host that is running PagerDuty Agent should be able to make an HTTPS connection to `events.pagerduty.com`. With this in mind, if the LAN does not have DNS service, there is no route to the internet, or the local ACL (if any) does not permit connecting to remote hosts, the agent will not be able to send data to PagerDuty.

The following items can help resolve network issues:

* [DNS](#dns)
* [Reachability](#reachability)
* [TCP Connection](#tcp-connection)

DNS
---

In the hostâ€™s command line, run the following command:

Shell
```
dig events.pagerduty.com

```

If you see a status response `SRVFAIL` or `NXDOMAIN`, the issue is most likely with DNS.

Reachability
------------

Our Events API hosts should respond to Internet Control Message Protocol (ICMP). Run the following command:

Shell
```
ping -q -c 3 events.pagerduty.com

```

If you see an indication of packet loss above 0%, or the program doesn't return after about five seconds, there is an issue with your network configuration, e.g., routing.

TCP Connection
--------------

Check to see if you can make a TCP connection to the Events API with [netcat](http://netcat.sourceforge.net/):

Shell
```
nc -v events.pagerduty.com 443

```

You should see the following message: `Connection to events.pagerduty.com port 443 [tcp/https] succeeded!`.

If the netcat command takes too long to print a message, or produces an error message indicating a timeout, connection refusal, etc., check your network's firewall/ACL and refer to [Safelist IPs](/main/docs/safelist-ips).

> ðŸ“˜ BSD netcat
> ------------
> 
> If youâ€™re using BSD netcat, you can add flags `-G 5 -w 1`. This will make the utility exit one second after establishing a connection (`-w 1`) and give up and report timeout after five seconds of waiting to establish one (`-G 5`).

Testing TLS
===========

PagerDuty Agent installs with its own copy of the public server certificate, which it uses when it connects to validate the connection to PagerDutyâ€™s [Events API](https://developer.pagerduty.com/api-reference/YXBpOjI3NDgyNjU-pager-duty-v2-events-api).

> ðŸš§ Supported Protocols and the Server Certificate
> ------------------------------------------------
> 
> PagerDuty supports the TLSv1.2 protocol. Older protocols (e.g., SSLv3 and TLSv1.0) are not supported due to security concerns. Traffic using older protocols and versions of TLS will be dropped.

For the security-conscious, the following command checks whether youâ€™re able to establish a TLS connection:

Shell
```
openssl s_client -host events.pagerduty.com -port 443

```

You should see messages indicating a successful connection/TLS handshake, including the following certificate chain:

Shell
```
Certificate chain
 0 s:/OU=GT12858685/OU=See www.rapidssl.com/resources/cps (c)14/OU=Domain Control Validated - RapidSSL(R)/CN=*.pagerduty.com
   i:/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3
 1 s:/C=US/O=GeoTrust Inc./CN=RapidSSL SHA256 CA - G3
   i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
 2 s:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
   i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA

```

If you get a TLS handshake error, it may be the case that the GeoTrust root CA certificate isn't trusted on your system. You can find this certificate at [DigiCert Trusted Root Authority Certificates](https://www.digicert.com/kb/digicert-root-certificates.htm).

In most distributions of Linux, the `ca-certificates` utility can be used for managing trusted certificates.

Proxy Troubleshooting
=====================

Issues with proxies can arise if the daemonâ€™s environment variables are not properly set or if there's an issue connecting to the proxy server (e.g., LAN restrictions). For instructions on configuring PagerDuty Agent to use a proxy server, refer to the [PagerDuty Agent installation guide](/main/docs/pagerduty-agent-integration-guide#using-a-proxy).

Network Issues
--------------

Please try the following if you encounter networking issues:

**Example**  

In the following example, weâ€™ll assume the proxy serverâ€™s hostname is `proxy.local` and the port is `8118`.

Try the following commands to uncover any networking issues:

1. `ping proxy.local` to see if it can be reached.
2. `dig proxy.local` or `host proxy.local` to see if the hostname resolves.
3. `nc -v proxy.local 8118` to check that the port is open and accepts connections.
4. Try using `curl` to connect through the proxy to the Events API's agent heartbeat endpoint. Client authentication methods vary; please reference `man curl` for more information about any options specific to your environment. For example:

cURL
```
curl -proxy proxy.local:8118 [additional proxy options] https://api.pagerduty.com/agent/2014-03-14/heartbeat

```

If youâ€™re able to successfully connect, you should receive a response similar to `{"heartbeat_interval_secs":86400}`.

Environment Variables
---------------------

The agent daemon requires access to environment variables in order to use a proxy and send events to PagerDuty. This is because the underlying Python library used to make the HTTPS connection is `urllib2`. From the [documentation on urllib2.urlopen](https://docs.python.org/2/library/urllib2.html#urllib2.urlopen):

> In addition, if proxy settings are detected (for example, when a `*_proxy` environment variable like `http_proxy` is set), [`ProxyHandler`](https://docs.python.org/2/library/urllib2.html#urllib2.ProxyHandler) is default installed and makes sure the requests are handled through the proxy.

Under **Using a Proxy** in the [PagerDuty Agent Integration Guide](/main/docs/pagerduty-agent-integration-guide#using-a-proxy), two ways to configure the environment variables for the daemon are described:

* [systemd](/main/docs/pagerduty-agent-integration-guide#systemd-based-systems)
* [SysV](/main/docs/pagerduty-agent-integration-guide#sysv-init-based-systems)

You can find out which of these your system uses by running `sudo stat /proc/1/exe`, which will show you the executable associated with the PID=1 process.

Once you've made sure that the daemon is configured with appropriate environment variables, you will need to make sure the changes are applied, which may vary based on your system. In systemd-based systems, you will be prompted to run `systemctl daemon-reload` when you restart `pdagent`, since a restart is required in order for changes to the service configuration to take effect.

Other Troubleshooting Steps
---------------------------

You may also wish to see the environment variables that the daemon uses by adding a logging statement to the agent's component module [`sendevent`](https://github.com/PagerDuty/pdagent/blob/master/pdagent/sendevent.py). On most Linux systems this will be in `/lib/python2.7/site-packages/pdagent/`. Add the following line to **`SendEventTask.send_event`**:

Python
```
def send_event(self, json_event_str, event_id):
    import os; logger.info(str(os.environ)) # add this line
    ...

```

After making the change, restart `pdagent` and try sending a test event using `pd-send`. After that, you'll find a message in the log that that looks like this:

```
2017-05-08 18:29:31,556 INFO    SendEventTask        pdagent.sendevent    {'TERM': 'xterm-256color', 'SHELL': '/bin/bash', 'SHLVL': '2', 'SYSTEMCTL_SKIP_REDIRECT': '', 'PWD': '/', 'LOGNAME': 'pdagent', 'USER': 'pdagent', 'HOME': '/home/pdagent', 'SYSTEMCTL_IGNORE_DEPENDENCIES': '', 'PATH': '/sbin:/usr/sbin:/bin:/usr/bin', 'XDG_SESSION_ID': '1', '_': '/usr/share/pdagent/bin/pdagentd.py'}

```

If the environment variables were set, they should show up in the print-out of the `os.environ` dictionary, i.e., `'http_proxy': 'http://proxy.local:8118'` and `'https_proxy': 'https://proxy.local:8118'`, which are missing in the above example.

Updated about 2 months ago

---

Learn more

* [PagerDuty Agent](https://github.com/PagerDuty/pdagent)

* [Table of Contents](#)
* + [Basic Troubleshooting](#basic-troubleshooting)
    - [Installation Error: `pdagent.service not found`](#installation-error-pdagentservice-not-found)
  + [Outqueue Troubleshooting](#outqueue-troubleshooting)
    - [Outqueue Directories](#outqueue-directories)
    - [Manually Purge the Queue](#manually-purge-the-queue)
  + [Network Troubleshooting](#network-troubleshooting)
    - [DNS](#dns)
    - [Reachability](#reachability)
    - [TCP Connection](#tcp-connection)
  + [Testing TLS](#testing-tls)
  + [Proxy Troubleshooting](#proxy-troubleshooting)
    - [Network Issues](#network-issues)
    - [Environment Variables](#environment-variables)
    - [Other Troubleshooting Steps](#other-troubleshooting-steps)
